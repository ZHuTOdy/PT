// Generated by CoffeeScript 2.3.0
(function() {
  var date, init_list, name, timeTable;

  date = new Vue({
    el: "#date",
    data: {
      date: ""
    },
    methods: {
      handleChange: function(date) {
        dailyReport.$data.date = date;
        return init_list();
      }
    }
  });

  // handleChange: ()->
  //   init_list()
  name = new Vue({
    el: "#name",
    data: {
      username: "",
      nickname: ""
    },
    methods: {
      handleChange: function() {
        return init_list();
      }
    }
  });

  timeTable = new Vue({
    el: "#timeTable",
    data: {
      items: [],
      page: 0,
      pageSize: 10,
      total: 0,
      Selection: []
    },
    methods: {
      handleSizeChange: function(pageSize) {
        timeTable.$data.pageSize = pageSize;
        return init_list();
      },
      handleCurrentChange: function(page) {
        timeTable.$data.page = page;
        return init_list();
      },
      handleSelectionChange: function(val) {
        return this.Selection = val;
      }
    }
  });

  init_list = function() {
    var fromTime, nickname, page, pageSize, toTime, username;
    page = timeTable.$data.page;
    pageSize = timeTable.$data.pageSize;
    fromTime = date.$data.date[0] || "2000-01-01";
    toTime = date.$data.date[1] || "2111-12-31";
    username = name.$data.username;
    return nickname = name.$data.nickname;
  };

  // socket.emit "report.list", {"date":{$gte:fromTime, $lte:toTime },"username" :{$regex:username},"nickname" :{$regex:nickname}},page, pageSize,  (res)->
  // 	return alert( res.err ) if res.err
  // 	Object.assign( timeTable.$data, res ) 
  init_list();

}).call(this);
